{"ast":null,"code":"import _objectSpread from\"C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'../styles/AddNewShow.css';import Modal from'../components/Modal';import SingleDateBox from\"../components/SingleDateBox\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddNewShow(){const[form,setForm]=useState({showDate:'',hallId:'',ticketPrice:'',bandName:'',picture:''});const[message,setMessage]=useState('');const[halls,setHalls]=useState([]);useEffect(()=>{fetch('/api/halls').then(res=>res.json()).then(data=>{console.log(\"Fetched halls:\",data);setHalls(data);}).catch(err=>console.error('Failed to fetch halls:',err));},[]);const handleChange=e=>{const{name,value}=e.target;console.log(\"Changed:\",name,value);setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();const formattedDate=form.showDate?form.showDate.toISOString().split(\"T\")[0]:null;const showData=_objectSpread(_objectSpread({},form),{},{showDate:formattedDate,hallId:form.hallId===\"\"?null:parseInt(form.hallId),ticketPrice:form.ticketPrice===\"\"?null:parseInt(form.ticketPrice)});console.log(\"Submitting:\",showData);try{const res=await fetch('/api/shows',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(showData)});const data=await res.json();if(!res.ok){throw new Error(data.message||'Failed to save show');}setMessage('Show added successfully!');setForm({showDate:'',hallId:'',ticketPrice:'',bandName:'',picture:''});}catch(err){console.error(err);setMessage('Error adding show');}};const fields=[{label:'Hall',name:'hallId',type:'select',options:halls},{label:'Ticket Price (₪)',name:'ticketPrice',type:'number'},{label:'Band Name',name:'bandName',type:'text'},{label:'Picture URL',name:'picture',type:'text'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"add-show-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add New Show\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"add-show-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(SingleDateBox,{selectedDate:form.showDate,setSelectedDate:date=>setForm(prev=>_objectSpread(_objectSpread({},prev),{},{showDate:date})),label:\"Show Date\"}),fields.map(_ref=>{let{label,name,type,options}=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:name,children:[label,\":\"]}),type==='select'?/*#__PURE__*/_jsxs(\"select\",{id:name,name:name,value:form[name],onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),options.map(option=>/*#__PURE__*/_jsxs(\"option\",{value:option.hallId,children:[option.hallName,\" (\",option.city,\")\"]},option.hallId))]}):/*#__PURE__*/_jsx(\"input\",_objectSpread({type:type,id:name,name:name,value:form[name],onChange:handleChange,required:true},type===\"number\"?{min:0,onKeyDown:e=>e.key==='-'&&e.preventDefault()}:{}))]},name);}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Show\"}),/*#__PURE__*/_jsx(Modal,{message:message,onClose:()=>setMessage('')})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Modal","SingleDateBox","jsx","_jsx","jsxs","_jsxs","AddNewShow","form","setForm","showDate","hallId","ticketPrice","bandName","picture","message","setMessage","halls","setHalls","fetch","then","res","json","data","console","log","catch","err","error","handleChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","formattedDate","toISOString","split","showData","parseInt","method","headers","body","JSON","stringify","ok","Error","fields","label","type","options","className","children","onSubmit","selectedDate","setSelectedDate","date","map","_ref","htmlFor","id","onChange","required","option","hallName","city","min","onKeyDown","key","onClose"],"sources":["C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/src/pages/AddNewShow.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../styles/AddNewShow.css';\r\nimport Modal from '../components/Modal';\r\nimport SingleDateBox from \"../components/SingleDateBox\";\r\n\r\n\r\nexport default function AddNewShow() {\r\n  const [form, setForm] = useState({\r\n    showDate: '',\r\n    hallId: '',\r\n    ticketPrice: '',\r\n    bandName: '',\r\n    picture: ''\r\n  });\r\n\r\n  const [message, setMessage] = useState('');\r\n  const [halls, setHalls] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/halls')\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(\"Fetched halls:\", data);\r\n        setHalls(data);\r\n      })\r\n      .catch(err => console.error('Failed to fetch halls:', err));\r\n  }, []);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    console.log(\"Changed:\", name, value);\r\n    setForm(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n\r\n    const formattedDate = form.showDate \r\n  ? form.showDate.toISOString().split(\"T\")[0] \r\n  : null;\r\n\r\n\r\n    const showData = {\r\n      ...form,\r\n      showDate: formattedDate,\r\n      hallId: form.hallId === \"\" ? null : parseInt(form.hallId),\r\n      ticketPrice: form.ticketPrice === \"\" ? null : parseInt(form.ticketPrice)\r\n    };\r\n\r\n    console.log(\"Submitting:\", showData);\r\n\r\n    try {\r\n      const res = await fetch('/api/shows', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(showData),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        throw new Error(data.message || 'Failed to save show');\r\n      }\r\n\r\n      setMessage('Show added successfully!');\r\n      setForm({\r\n        showDate: '',\r\n        hallId: '',\r\n        ticketPrice: '',\r\n        bandName: '',\r\n        picture: ''\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage('Error adding show');\r\n    }\r\n  };\r\n\r\n  const fields = [\r\n  \r\n    { label: 'Hall', name: 'hallId', type: 'select', options: halls },\r\n    { label: 'Ticket Price (₪)', name: 'ticketPrice', type: 'number' },\r\n    { label: 'Band Name', name: 'bandName', type: 'text' },\r\n    { label: 'Picture URL', name: 'picture', type: 'text' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"add-show-container\">\r\n      <h1>Add New Show</h1>\r\n      <form className=\"add-show-form\" onSubmit={handleSubmit}>\r\n  {/* Show Date - תיבת בחירת תאריך מיוחדת */}\r\n  <SingleDateBox\r\n    selectedDate={form.showDate}\r\n    setSelectedDate={(date) => setForm(prev => ({ ...prev, showDate: date }))}\r\n    label=\"Show Date\"\r\n  />\r\n\r\n  {/* שאר השדות */}\r\n  {fields.map(({ label, name, type, options }) => (\r\n  <div key={name}>\r\n    <label htmlFor={name}>{label}:</label>\r\n    \r\n    {type === 'select' ? (\r\n      <select\r\n        id={name}\r\n        name={name}\r\n        value={form[name]}\r\n        onChange={handleChange}\r\n        required\r\n      >\r\n        <option value=\"\">Select</option>\r\n        {options.map(option => (\r\n          <option key={option.hallId} value={option.hallId}>\r\n            {option.hallName} ({option.city})\r\n          </option>\r\n        ))}\r\n      </select>\r\n    ) : (\r\n      <input\r\n        type={type}\r\n        id={name}\r\n        name={name}\r\n        value={form[name]}\r\n        onChange={handleChange}\r\n        required\r\n        {...(type === \"number\" ? { min: 0, onKeyDown: (e) => e.key === '-' && e.preventDefault() } : {})}\r\n      />\r\n    )}\r\n  </div>\r\n))}\r\n\r\n        <button type=\"submit\">Add Show</button>\r\n        <Modal message={message} onClose={() => setMessage('')} />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}