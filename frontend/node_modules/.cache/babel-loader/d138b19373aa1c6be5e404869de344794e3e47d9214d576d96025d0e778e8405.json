{"ast":null,"code":"import _objectSpread from\"C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import SeatPicker from'../components/SeatPicker';import'../styles/BuyTicket.css';import axios from'../axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BuyTicket=()=>{const{showId}=useParams();// ðŸ‘ˆ × ×§×œ×˜ ×ž×”Ö¾URL\nconst[showData,setShowData]=useState(null);const[selectedSeats,setSelectedSeats]=useState([]);const[formData,setFormData]=useState({privateName:'',familyName:'',mail:''});// ×©×œ×™×¤×ª ×ž×•×¤×¢ + ×ž×•×©×‘×™× ×ž×”×‘××§\nuseEffect(()=>{axios.get(\"/shows/\".concat(showId,\"/seats\")).then(res=>setShowData(res.data)).catch(err=>console.error(err));},[showId]);const handleTicketPurchase=e=>{e.preventDefault();const reservation={privateName:formData.privateName,familyName:formData.familyName,mail:formData.mail,resDate:new Date().toISOString().split(\"T\")[0],showId:showId,seats:selectedSeats.map(seat=>({rowNum:seat.row,chairNum:seat.col}))};axios.post(\"/reservations\",reservation).then(()=>alert(\"Reservation successful!\")).catch(err=>alert(\"Error: \"+err.message));};if(!showData)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"buy-ticket-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Buy Ticket\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"show-info\",children:[/*#__PURE__*/_jsxs(\"button\",{children:[\"Band: \",showData.bandName]}),/*#__PURE__*/_jsxs(\"button\",{children:[\"Date: \",showData.showDate]}),/*#__PURE__*/_jsxs(\"button\",{children:[\"Location: \",showData.country,\",\",showData.city,\", \",showData.street]})]}),/*#__PURE__*/_jsx(\"img\",{src:showData.picture,alt:\"band\",className:\"band-img\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"seats-section\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Selected seats:\"}),\" \",selectedSeats.map(s=>\"row: \".concat(s.row,\", seat: \").concat(s.col)).join(\" | \")]}),/*#__PURE__*/_jsx(\"div\",{className:\"stage\",children:\"STAGE\"}),/*#__PURE__*/_jsx(SeatPicker,{showData:showData,onSelect:setSelectedSeats})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleTicketPurchase,children:[/*#__PURE__*/_jsx(\"label\",{children:\"First name:\"}),/*#__PURE__*/_jsx(\"input\",{value:formData.privateName,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{privateName:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{children:\"Last name:\"}),/*#__PURE__*/_jsx(\"input\",{value:formData.familyName,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{familyName:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{value:formData.mail,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{mail:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{children:\"Number of seats:\"}),/*#__PURE__*/_jsx(\"input\",{value:selectedSeats.length,disabled:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Price:\"}),/*#__PURE__*/_jsx(\"input\",{value:selectedSeats.length*showData.ticketPrice,disabled:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Buy\"})]})})]})]});};export default BuyTicket;","map":{"version":3,"names":["React","useState","useEffect","useParams","SeatPicker","axios","jsx","_jsx","jsxs","_jsxs","BuyTicket","showId","showData","setShowData","selectedSeats","setSelectedSeats","formData","setFormData","privateName","familyName","mail","get","concat","then","res","data","catch","err","console","error","handleTicketPurchase","e","preventDefault","reservation","resDate","Date","toISOString","split","seats","map","seat","rowNum","row","chairNum","col","post","alert","message","children","className","bandName","showDate","country","city","street","src","picture","alt","s","join","onSelect","onSubmit","value","onChange","_objectSpread","target","length","disabled","ticketPrice","type"],"sources":["C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/src/pages/BuyTicket.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport SeatPicker from '../components/SeatPicker';\r\nimport '../styles/BuyTicket.css';\r\nimport axios from '../axios';\r\n\r\nconst BuyTicket = () => {\r\n  const { showId } = useParams();   // ðŸ‘ˆ × ×§×œ×˜ ×ž×”Ö¾URL\r\n  const [showData, setShowData] = useState(null);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [formData, setFormData] = useState({ privateName: '', familyName: '', mail: '' });\r\n\r\n  // ×©×œ×™×¤×ª ×ž×•×¤×¢ + ×ž×•×©×‘×™× ×ž×”×‘××§\r\n  useEffect(() => {\r\n    axios.get(`/shows/${showId}/seats`)\r\n      .then(res => setShowData(res.data))\r\n      .catch(err => console.error(err));\r\n  }, [showId]);\r\n\r\n  const handleTicketPurchase = (e) => {\r\n  e.preventDefault();\r\n\r\n  const reservation = {\r\n    privateName: formData.privateName,\r\n    familyName: formData.familyName,\r\n    mail: formData.mail,\r\n    resDate: new Date().toISOString().split(\"T\")[0],\r\n    showId: showId,\r\n    seats: selectedSeats.map(seat => ({\r\n      rowNum: seat.row,\r\n      chairNum: seat.col\r\n    }))\r\n  };\r\n\r\n  axios.post(\"/reservations\", reservation)\r\n    .then(() => alert(\"Reservation successful!\"))\r\n    .catch(err => alert(\"Error: \" + err.message));\r\n};\r\n\r\n\r\n  if (!showData) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"buy-ticket-container\">\r\n      <h1>Buy Ticket</h1>\r\n\r\n      <div className=\"header-bar\">\r\n        <div className=\"show-info\">\r\n          <button>Band: {showData.bandName}</button>\r\n          <button>Date: {showData.showDate}</button>\r\n          <button>Location: {showData.country},{showData.city}, {showData.street}</button>\r\n        </div>\r\n        <img src={showData.picture} alt=\"band\" className=\"band-img\" />\r\n      </div>\r\n\r\n      <div className=\"main-section\">\r\n        <div className=\"seats-section\">\r\n          <p>\r\n            <strong>Selected seats:</strong>{\" \"}\r\n            {selectedSeats.map(s => `row: ${s.row}, seat: ${s.col}`).join(\" | \")}\r\n          </p>\r\n\r\n\r\n\r\n          <div className=\"stage\">STAGE</div>\r\n          <SeatPicker showData={showData} onSelect={setSelectedSeats} />\r\n        </div>\r\n\r\n        <div className=\"form-section\">\r\n          <form onSubmit={handleTicketPurchase}>\r\n            <label>First name:</label>\r\n            <input value={formData.privateName} onChange={(e) => setFormData({ ...formData, privateName: e.target.value })} />\r\n\r\n            <label>Last name:</label>\r\n            <input value={formData.familyName} onChange={(e) => setFormData({ ...formData, familyName: e.target.value })} />\r\n\r\n            <label>Email:</label>\r\n            <input value={formData.mail} onChange={(e) => setFormData({ ...formData, mail: e.target.value })} />\r\n\r\n            <label>Number of seats:</label>\r\n            <input value={selectedSeats.length} disabled />\r\n\r\n            <label>Price:</label>\r\n            <input value={selectedSeats.length * showData.ticketPrice} disabled />\r\n\r\n            <button type=\"submit\">Buy</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BuyTicket;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}