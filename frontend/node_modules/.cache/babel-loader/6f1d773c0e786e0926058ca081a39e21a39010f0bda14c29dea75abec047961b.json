{"ast":null,"code":"import _objectSpread from\"C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'../styles/AddNewShow.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddNewShow(){const[form,setForm]=useState({showDate:'',hallId:'',ticketPrice:'',bandName:'',picture:''});const[message,setMessage]=useState('');const[halls,setHalls]=useState([]);useEffect(()=>{fetch('/api/halls').then(res=>res.json()).then(data=>{console.log(\"Fetched halls:\",data);setHalls(data);}).catch(err=>console.error('Failed to fetch halls:',err));},[]);const handleChange=e=>{const{name,value}=e.target;console.log(\"Changed:\",name,value);setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();const showData=_objectSpread(_objectSpread({},form),{},{hallId:form.hallId===\"\"?null:parseInt(form.hallId),ticketPrice:form.ticketPrice===\"\"?null:parseInt(form.ticketPrice)});console.log(\"Submitting:\",showData);try{const res=await fetch('/api/shows',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(showData)});const data=await res.json();if(!res.ok){throw new Error(data.message||'Failed to save show');}setMessage('Show added successfully!');setForm({showDate:'',hallId:'',ticketPrice:'',bandName:'',picture:''});}catch(err){console.error(err);setMessage('Error adding show');}};const fields=[{label:'Show Date',name:'showDate',type:'date'},{label:'Hall',name:'hallId',type:'select',options:halls},{label:'Ticket Price (₪)',name:'ticketPrice',type:'number'},{label:'Band Name',name:'bandName',type:'text'},{label:'Picture URL',name:'picture',type:'text'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"add-show-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add New Show\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message}),/*#__PURE__*/_jsxs(\"form\",{className:\"add-show-form\",onSubmit:handleSubmit,children:[fields.map(_ref=>{let{label,name,type,options}=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:name,children:[label,\":\"]}),type==='select'?/*#__PURE__*/_jsxs(\"select\",{id:name,name:name,value:form[name],onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select --\"}),options.map(option=>/*#__PURE__*/_jsxs(\"option\",{value:option.hallId,children:[option.hallName,\" (\",option.city,\")\"]},option.hallId))]}):/*#__PURE__*/_jsx(\"input\",{type:type,id:name,name:name,value:form[name],onChange:handleChange,required:true})]},name);}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Show\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AddNewShow","form","setForm","showDate","hallId","ticketPrice","bandName","picture","message","setMessage","halls","setHalls","fetch","then","res","json","data","console","log","catch","err","error","handleChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","showData","parseInt","method","headers","body","JSON","stringify","ok","Error","fields","label","type","options","className","children","onSubmit","map","_ref","htmlFor","id","onChange","required","option","hallName","city"],"sources":["C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/src/pages/AddNewShow.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../styles/AddNewShow.css';\r\n\r\nexport default function AddNewShow() {\r\n  const [form, setForm] = useState({\r\n    showDate: '',\r\n    hallId: '',\r\n    ticketPrice: '',\r\n    bandName: '',\r\n    picture: ''\r\n  });\r\n\r\n  const [message, setMessage] = useState('');\r\n  const [halls, setHalls] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/halls')\r\n      .then(res => res.json())\r\n       .then(data => {\r\n      console.log(\"Fetched halls:\", data);\r\n      setHalls(data);\r\n    })\r\n    .catch(err => console.error('Failed to fetch halls:', err));\r\n}, []);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n     console.log(\"Changed:\", name, value);\r\n    setForm(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n\r\n    const showData = {\r\n      ...form,\r\n      hallId: form.hallId === \"\" ? null : parseInt(form.hallId),\r\n      ticketPrice: form.ticketPrice === \"\" ? null : parseInt(form.ticketPrice)\r\n    };\r\n\r\n    console.log(\"Submitting:\", showData);\r\n\r\n    try {\r\n      const res = await fetch('/api/shows', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(showData),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        throw new Error(data.message || 'Failed to save show');\r\n      }\r\n\r\n      setMessage('Show added successfully!');\r\n      setForm({\r\n        showDate: '',\r\n        hallId: '',\r\n        ticketPrice: '',\r\n        bandName: '',\r\n        picture: ''\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage('Error adding show');\r\n    }\r\n  };\r\n\r\n  const fields = [\r\n    { label: 'Show Date', name: 'showDate', type: 'date' },\r\n    { label: 'Hall', name: 'hallId', type: 'select', options: halls },\r\n    { label: 'Ticket Price (₪)', name: 'ticketPrice', type: 'number' },\r\n    { label: 'Band Name', name: 'bandName', type: 'text' },\r\n    { label: 'Picture URL', name: 'picture', type: 'text' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"add-show-container\">\r\n      <h1>Add New Show</h1>\r\n      {message && <p className=\"message\">{message}</p>}\r\n      <form className=\"add-show-form\" onSubmit={handleSubmit}>\r\n        {fields.map(({ label, name, type, options }) => (\r\n          <div key={name}>\r\n            <label htmlFor={name}>{label}:</label>\r\n            {type === 'select' ? (\r\n              <select\r\n                id={name}\r\n                name={name}\r\n                value={form[name]}\r\n                onChange={handleChange}\r\n                required\r\n              >\r\n                <option value=\"\">-- Select --</option>\r\n                {options.map(option => (\r\n                  <option key={option.hallId} value={option.hallId}>\r\n                  {option.hallName} ({option.city})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            ) : (\r\n              <input\r\n                type={type}\r\n                id={name}\r\n                name={name}\r\n                value={form[name]}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            )}\r\n          </div>\r\n        ))}\r\n        <button type=\"submit\">Add Show</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"0JAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACnC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAC,CAC/BS,QAAQ,CAAE,EAAE,CACZC,MAAM,CAAE,EAAE,CACVC,WAAW,CAAE,EAAE,CACfC,QAAQ,CAAE,EAAE,CACZC,OAAO,CAAE,EACX,CAAC,CAAC,CAEF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACdiB,KAAK,CAAC,YAAY,CAAC,CAChBC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACtBF,IAAI,CAACG,IAAI,EAAI,CACfC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,IAAI,CAAC,CACnCL,QAAQ,CAACK,IAAI,CAAC,CAChB,CAAC,CAAC,CACDG,KAAK,CAACC,GAAG,EAAIH,OAAO,CAACI,KAAK,CAAC,wBAAwB,CAAED,GAAG,CAAC,CAAC,CAC/D,CAAC,CAAE,EAAE,CAAC,CAEJ,KAAM,CAAAE,YAAY,CAAGC,CAAC,EAAI,CACxB,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAC/BT,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEM,IAAI,CAAEC,KAAK,CAAC,CACrCvB,OAAO,CAACyB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACPD,IAAI,MACP,CAACH,IAAI,EAAGC,KAAK,EACb,CAAC,CACL,CAAC,CAED,KAAM,CAAAI,YAAY,CAAG,KAAM,CAAAN,CAAC,EAAI,CAC9BA,CAAC,CAACO,cAAc,CAAC,CAAC,CAElB,KAAM,CAAAC,QAAQ,CAAAH,aAAA,CAAAA,aAAA,IACT3B,IAAI,MACPG,MAAM,CAAEH,IAAI,CAACG,MAAM,GAAK,EAAE,CAAG,IAAI,CAAG4B,QAAQ,CAAC/B,IAAI,CAACG,MAAM,CAAC,CACzDC,WAAW,CAAEJ,IAAI,CAACI,WAAW,GAAK,EAAE,CAAG,IAAI,CAAG2B,QAAQ,CAAC/B,IAAI,CAACI,WAAW,CAAC,EACzE,CAEDY,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEa,QAAQ,CAAC,CAEpC,GAAI,CACF,KAAM,CAAAjB,GAAG,CAAG,KAAM,CAAAF,KAAK,CAAC,YAAY,CAAE,CACpCqB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACN,QAAQ,CAC/B,CAAC,CAAC,CAEF,KAAM,CAAAf,IAAI,CAAG,KAAM,CAAAF,GAAG,CAACC,IAAI,CAAC,CAAC,CAC7B,GAAI,CAACD,GAAG,CAACwB,EAAE,CAAE,CACX,KAAM,IAAI,CAAAC,KAAK,CAACvB,IAAI,CAACR,OAAO,EAAI,qBAAqB,CAAC,CACxD,CAEAC,UAAU,CAAC,0BAA0B,CAAC,CACtCP,OAAO,CAAC,CACNC,QAAQ,CAAE,EAAE,CACZC,MAAM,CAAE,EAAE,CACVC,WAAW,CAAE,EAAE,CACfC,QAAQ,CAAE,EAAE,CACZC,OAAO,CAAE,EACX,CAAC,CAAC,CACJ,CAAE,MAAOa,GAAG,CAAE,CACZH,OAAO,CAACI,KAAK,CAACD,GAAG,CAAC,CAClBX,UAAU,CAAC,mBAAmB,CAAC,CACjC,CACF,CAAC,CAED,KAAM,CAAA+B,MAAM,CAAG,CACb,CAAEC,KAAK,CAAE,WAAW,CAAEjB,IAAI,CAAE,UAAU,CAAEkB,IAAI,CAAE,MAAO,CAAC,CACtD,CAAED,KAAK,CAAE,MAAM,CAAEjB,IAAI,CAAE,QAAQ,CAAEkB,IAAI,CAAE,QAAQ,CAAEC,OAAO,CAAEjC,KAAM,CAAC,CACjE,CAAE+B,KAAK,CAAE,kBAAkB,CAAEjB,IAAI,CAAE,aAAa,CAAEkB,IAAI,CAAE,QAAS,CAAC,CAClE,CAAED,KAAK,CAAE,WAAW,CAAEjB,IAAI,CAAE,UAAU,CAAEkB,IAAI,CAAE,MAAO,CAAC,CACtD,CAAED,KAAK,CAAE,aAAa,CAAEjB,IAAI,CAAE,SAAS,CAAEkB,IAAI,CAAE,MAAO,CAAC,CACxD,CAED,mBACE3C,KAAA,QAAK6C,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjChD,IAAA,OAAAgD,QAAA,CAAI,cAAY,CAAI,CAAC,CACpBrC,OAAO,eAAIX,IAAA,MAAG+C,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAErC,OAAO,CAAI,CAAC,cAChDT,KAAA,SAAM6C,SAAS,CAAC,eAAe,CAACE,QAAQ,CAAEjB,YAAa,CAAAgB,QAAA,EACpDL,MAAM,CAACO,GAAG,CAACC,IAAA,MAAC,CAAEP,KAAK,CAAEjB,IAAI,CAAEkB,IAAI,CAAEC,OAAQ,CAAC,CAAAK,IAAA,oBACzCjD,KAAA,QAAA8C,QAAA,eACE9C,KAAA,UAAOkD,OAAO,CAAEzB,IAAK,CAAAqB,QAAA,EAAEJ,KAAK,CAAC,GAAC,EAAO,CAAC,CACrCC,IAAI,GAAK,QAAQ,cAChB3C,KAAA,WACEmD,EAAE,CAAE1B,IAAK,CACTA,IAAI,CAAEA,IAAK,CACXC,KAAK,CAAExB,IAAI,CAACuB,IAAI,CAAE,CAClB2B,QAAQ,CAAE7B,YAAa,CACvB8B,QAAQ,MAAAP,QAAA,eAERhD,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAAoB,QAAA,CAAC,cAAY,CAAQ,CAAC,CACrCF,OAAO,CAACI,GAAG,CAACM,MAAM,eACjBtD,KAAA,WAA4B0B,KAAK,CAAE4B,MAAM,CAACjD,MAAO,CAAAyC,QAAA,EAChDQ,MAAM,CAACC,QAAQ,CAAC,IAAE,CAACD,MAAM,CAACE,IAAI,CAAC,GAChC,GAFaF,MAAM,CAACjD,MAEZ,CACT,CAAC,EACI,CAAC,cAETP,IAAA,UACE6C,IAAI,CAAEA,IAAK,CACXQ,EAAE,CAAE1B,IAAK,CACTA,IAAI,CAAEA,IAAK,CACXC,KAAK,CAAExB,IAAI,CAACuB,IAAI,CAAE,CAClB2B,QAAQ,CAAE7B,YAAa,CACvB8B,QAAQ,MACT,CACF,GA1BO5B,IA2BL,CAAC,EACP,CAAC,cACF3B,IAAA,WAAQ6C,IAAI,CAAC,QAAQ,CAAAG,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACnC,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}