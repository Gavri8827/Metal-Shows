{"ast":null,"code":"import _objectSpread from\"C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import SeatPicker from'../components/SeatPicker';import'../styles/BuyTicket.css';import Modal from'../components/Modal';import axios from'../axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BuyTicket=()=>{const{showId}=useParams();// üëà ◊†◊ß◊ú◊ò ◊û◊î÷æURL\nconst[showData,setShowData]=useState(null);const[selectedSeats,setSelectedSeats]=useState([]);const[formData,setFormData]=useState({privateName:'',familyName:'',mail:''});const[message,setMessage]=useState('');// üëà ◊î◊ï◊°◊§◊†◊ï\n// ◊©◊ú◊ô◊§◊™ ◊û◊ï◊§◊¢ + ◊û◊ï◊©◊ë◊ô◊ù ◊û◊î◊ë◊ê◊ß\nuseEffect(()=>{axios.get(\"/shows/\".concat(showId,\"/seats\")).then(res=>setShowData(res.data)).catch(err=>console.error(err));},[showId]);const handleTicketPurchase=e=>{e.preventDefault();const reservation={privateName:formData.privateName,familyName:formData.familyName,mail:formData.mail,resDate:new Date().toISOString().split(\"T\")[0],showId:showId,seats:selectedSeats.map(seat=>({rowNum:seat.row,chairNum:seat.col}))};axios.post(\"/reservations\",reservation).then(()=>{setMessage(\"üéâ Reservation successful!\");setFormData({privateName:'',familyName:'',mail:''});setSelectedSeats([]);}).catch(err=>setMessage(\"‚ùå Error: \"+err.message));};if(!showData)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"buy-ticket-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Buy Ticket\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-bar\",children:[/*#__PURE__*/_jsx(\"img\",{src:showData.picture,alt:\"band\",className:\"band-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"show-info\",children:[/*#__PURE__*/_jsxs(\"button\",{children:[\"Band: \",showData.bandName]}),/*#__PURE__*/_jsxs(\"button\",{children:[\"Date: \",showData.showDate]}),/*#__PURE__*/_jsxs(\"button\",{children:[\"Location: \",showData.country,\",\",showData.city,\", \",showData.street]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"seats-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stage\",children:\"STAGE\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"selected-seats-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Selected seats:\"}),\" \",selectedSeats.map(s=>\"row: \".concat(s.row,\", seat: \").concat(s.col)).join(\" | \")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot available\"}),\"Available\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot taken\"}),\"Taken\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot selected\"}),\"Selected\"]})]}),/*#__PURE__*/_jsx(SeatPicker,{showData:showData,onSelect:setSelectedSeats})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleTicketPurchase,children:[/*#__PURE__*/_jsx(\"label\",{children:\"First name:\"}),/*#__PURE__*/_jsx(\"input\",{value:formData.privateName,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{privateName:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{children:\"Last name:\"}),/*#__PURE__*/_jsx(\"input\",{value:formData.familyName,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{familyName:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{value:formData.mail,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{mail:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{children:\"Number of seats:\"}),/*#__PURE__*/_jsx(\"input\",{value:selectedSeats.length,disabled:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Price:\"}),/*#__PURE__*/_jsx(\"input\",{value:selectedSeats.length*showData.ticketPrice,disabled:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Buy\"})]})})]}),/*#__PURE__*/_jsx(Modal,{message:message,onClose:()=>setMessage('')})]});};export default BuyTicket;","map":{"version":3,"names":["React","useState","useEffect","useParams","SeatPicker","Modal","axios","jsx","_jsx","jsxs","_jsxs","BuyTicket","showId","showData","setShowData","selectedSeats","setSelectedSeats","formData","setFormData","privateName","familyName","mail","message","setMessage","get","concat","then","res","data","catch","err","console","error","handleTicketPurchase","e","preventDefault","reservation","resDate","Date","toISOString","split","seats","map","seat","rowNum","row","chairNum","col","post","children","className","src","picture","alt","bandName","showDate","country","city","street","s","join","onSelect","onSubmit","value","onChange","_objectSpread","target","length","disabled","ticketPrice","type","onClose"],"sources":["C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/src/pages/BuyTicket.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport SeatPicker from '../components/SeatPicker';\r\nimport '../styles/BuyTicket.css';\r\nimport Modal from '../components/Modal';\r\nimport axios from '../axios';\r\n\r\nconst BuyTicket = () => {\r\n  const { showId } = useParams();   // üëà ◊†◊ß◊ú◊ò ◊û◊î÷æURL\r\n  const [showData, setShowData] = useState(null);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [formData, setFormData] = useState({ privateName: '', familyName: '', mail: '' });\r\n  const [message, setMessage] = useState(''); // üëà ◊î◊ï◊°◊§◊†◊ï\r\n\r\n  // ◊©◊ú◊ô◊§◊™ ◊û◊ï◊§◊¢ + ◊û◊ï◊©◊ë◊ô◊ù ◊û◊î◊ë◊ê◊ß\r\n  useEffect(() => {\r\n    axios.get(`/shows/${showId}/seats`)\r\n      .then(res => setShowData(res.data))\r\n      .catch(err => console.error(err));\r\n  }, [showId]);\r\n\r\n  const handleTicketPurchase = (e) => {\r\n    e.preventDefault();\r\n\r\n    const reservation = {\r\n      privateName: formData.privateName,\r\n      familyName: formData.familyName,\r\n      mail: formData.mail,\r\n      resDate: new Date().toISOString().split(\"T\")[0],\r\n      showId: showId,\r\n      seats: selectedSeats.map(seat => ({\r\n        rowNum: seat.row,\r\n        chairNum: seat.col\r\n      }))\r\n    };\r\n\r\n    axios.post(\"/reservations\", reservation)\r\n      .then(() => {\r\n        setMessage(\"üéâ Reservation successful!\");\r\n        setFormData({ privateName: '', familyName: '', mail: '' });\r\n        setSelectedSeats([]);\r\n      })\r\n      .catch(err => setMessage(\"‚ùå Error: \" + err.message));\r\n  };\r\n\r\n  if (!showData) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"buy-ticket-container\">\r\n      <h1>Buy Ticket</h1>\r\n\r\n      <div className=\"header-bar\">\r\n        <img src={showData.picture} alt=\"band\" className=\"band-img\" />\r\n        <div className=\"show-info\">\r\n                    <button>Band: {showData.bandName}</button>\r\n          <button>Date: {showData.showDate}</button>\r\n          <button>Location: {showData.country},{showData.city}, {showData.street}</button>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      <div className=\"main-section\">\r\n        {/* ◊¶◊ì ◊©◊û◊ê◊ú ‚Äì ◊î◊ê◊ï◊ú◊ù */}\r\n        <div className=\"seats-section\">\r\n          <div className=\"stage\">STAGE</div>\r\n            <p className=\"selected-seats-text\">\r\n            <strong>Selected seats:</strong>{\" \"}\r\n            {selectedSeats.map(s => `row: ${s.row}, seat: ${s.col}`).join(\" | \")}\r\n          </p>\r\n\r\n           <div className=\"legend\">\r\n            <span><span className=\"dot available\"></span>Available</span>\r\n            <span><span className=\"dot taken\"></span>Taken</span>\r\n            <span><span className=\"dot selected\"></span>Selected</span>\r\n          </div>\r\n          <SeatPicker showData={showData} onSelect={setSelectedSeats} />\r\n        </div>\r\n\r\n        <div className=\"form-section\">\r\n          <form onSubmit={handleTicketPurchase}>\r\n            <label>First name:</label>\r\n            <input value={formData.privateName} onChange={(e) => setFormData({ ...formData, privateName: e.target.value })} />\r\n\r\n            <label>Last name:</label>\r\n            <input value={formData.familyName} onChange={(e) => setFormData({ ...formData, familyName: e.target.value })} />\r\n\r\n            <label>Email:</label>\r\n            <input value={formData.mail} onChange={(e) => setFormData({ ...formData, mail: e.target.value })} />\r\n\r\n            <label>Number of seats:</label>\r\n            <input value={selectedSeats.length} disabled />\r\n\r\n            <label>Price:</label>\r\n            <input value={selectedSeats.length * showData.ticketPrice} disabled />\r\n\r\n            <button type=\"submit\">Buy</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      {/* üëá ◊î◊ï◊ì◊¢◊î ◊ß◊ï◊§◊¶◊™ ◊õ÷æModal */}\r\n      <Modal message={message} onClose={() => setMessage('')} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BuyTicket;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}