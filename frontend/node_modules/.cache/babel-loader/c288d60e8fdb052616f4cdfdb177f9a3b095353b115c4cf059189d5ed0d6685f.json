{"ast":null,"code":"import _objectSpread from\"C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import'../styles/HomePage.css';import SearchBox from\"../components/SearchBox\";import DateBox from\"../components/DateBox\";import FilterBox from\"../components/FilterBox\";import ShowCard from'../components/ShowCard';import{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function HomePage(){const[shows,setShows]=useState([]);const[filteredShows,setFilteredShows]=useState([]);const[query,setQuery]=useState(\"\");const[location,setLocation]=useState(\"\");const[startDate,setStartDate]=useState(null);const[endDate,setEndDate]=useState(null);useEffect(()=>{fetch(\"http://localhost:8081/api/shows\").then(res=>res.json()).then(data=>{console.log(\"Fetched shows from backend:\",data);console.log(\"✅ Shows from backend:\",data.map(s=>s.showDate));setShows(data);setFilteredShows(data);}).catch(err=>console.error(\"Error fetching shows:\",err));},[]);// פונקציית סינון מרכזית\nconst applyFilters=()=>{let results=[...shows];// חיפוש לפי שם להקה\nif(query&&query.trim()!==\"\"){results=results.filter(show=>{var _show$bandName;return(_show$bandName=show.bandName)===null||_show$bandName===void 0?void 0:_show$bandName.toLowerCase().includes(query.toLowerCase());});}// סינון לפי מדינה\nif(location&&location!==\"\"){results=results.filter(show=>{var _show$hall;// בדיקה גמישה יותר - תומך גם ב-country וגם ב-location\nconst showCountry=((_show$hall=show.hall)===null||_show$hall===void 0?void 0:_show$hall.country)||show.country||show.location;return(showCountry===null||showCountry===void 0?void 0:showCountry.toLowerCase())===location.toLowerCase();});}// סינון לפי טווח תאריכים\nif(startDate||endDate){console.log(\"📅 Filtering by dates:\",{startDate,endDate});results=results.filter(show=>{// אם אין תאריך -> לא מציגים את ההופעה\nif(!show.showDate)return false;console.log(\"📅 raw show.date:\",show.showDate);// יצירת אובייקט Date מתוך \"YYYY-MM-DD\"\nconst[year,month,day]=show.showDate.split(\"-\");const showDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));console.log(\"👉 parsed showDate:\",showDate);// ניקוי שעות מהתאריכים שהמשתמש בחר\nconst start=startDate?new Date(startDate.getFullYear(),startDate.getMonth(),startDate.getDate()):null;const end=endDate?new Date(endDate.getFullYear(),endDate.getMonth(),endDate.getDate()):null;console.log(\"🔎 comparing:\",{showDate,start,end});if(start&&!end){return showDate>=start;}if(!start&&end){return showDate<=end;}if(start&&end){return showDate>=start&&showDate<=end;}return true;});}setFilteredShows(results);};// עדכון הסינון בכל שינוי\nuseEffect(()=>{applyFilters();},[query,location,startDate,endDate,shows]);// פונקציה לניקוי כל הפילטרים\nconst clearFilters=()=>{setQuery(\"\");setLocation(\"\");setStartDate(null);setEndDate(null);setFilteredShows(shows);};return/*#__PURE__*/_jsxs(\"div\",{className:\"HomePageContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Worldwide Metal Shows Tickets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-bar\",children:[/*#__PURE__*/_jsx(SearchBox,{query:query,setQuery:setQuery}),/*#__PURE__*/_jsx(FilterBox,{location:location,setLocation:setLocation}),/*#__PURE__*/_jsx(DateBox,{startDate:startDate,endDate:endDate,setStartDate:setStartDate,setEndDate:setEndDate,onApply:applyFilters// אפשר להשתמש בזה אם רוצים חיפוש ידני\n}),/*#__PURE__*/_jsx(\"button\",{onClick:clearFilters,className:\"clear-filters\",children:\"Clear All Filters\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-info\",children:(query||location||startDate||endDate)&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Active filters:\",query&&\" Band: \\\"\".concat(query,\"\\\"\"),location&&\" Location: \".concat(location),startDate&&\" From: \".concat(startDate.toLocaleDateString()),endDate&&\" Until: \".concat(endDate.toLocaleDateString()),\" | Found: \".concat(filteredShows.length,\" shows\")]})}),/*#__PURE__*/_jsx(\"div\",{className:\"shows-list\",children:filteredShows.length>0?filteredShows.map(show=>/*#__PURE__*/_jsx(ShowCard,_objectSpread({},show),show.showId)):/*#__PURE__*/_jsx(\"div\",{className:\"no-shows\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No shows found matching your criteria\"})})})]});}export default HomePage;","map":{"version":3,"names":["SearchBox","DateBox","FilterBox","ShowCard","useEffect","useState","jsx","_jsx","jsxs","_jsxs","HomePage","shows","setShows","filteredShows","setFilteredShows","query","setQuery","location","setLocation","startDate","setStartDate","endDate","setEndDate","fetch","then","res","json","data","console","log","map","s","showDate","catch","err","error","applyFilters","results","trim","filter","show","_show$bandName","bandName","toLowerCase","includes","_show$hall","showCountry","hall","country","year","month","day","split","Date","parseInt","start","getFullYear","getMonth","getDate","end","clearFilters","className","children","onApply","onClick","concat","toLocaleDateString","length","_objectSpread","showId"],"sources":["C:/Users/gavri/OneDrive/Desktop/My Projects/full-metal-shows/frontend/src/pages/HomePage.js"],"sourcesContent":["import '../styles/HomePage.css';\r\nimport SearchBox from \"../components/SearchBox\";\r\nimport DateBox from \"../components/DateBox\";\r\nimport FilterBox from \"../components/FilterBox\";\r\nimport ShowCard from '../components/ShowCard';\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction HomePage() {\r\n  const [shows, setShows] = useState([]);\r\n  const [filteredShows, setFilteredShows] = useState([]);\r\n\r\n  const [query, setQuery] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [startDate, setStartDate] = useState(null);\r\n  const [endDate, setEndDate] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:8081/api/shows\")\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(\"Fetched shows from backend:\", data);\r\n        console.log(\"✅ Shows from backend:\", data.map(s => s.showDate));\r\n        setShows(data);\r\n        setFilteredShows(data);\r\n      })\r\n      .catch(err => console.error(\"Error fetching shows:\", err));\r\n  }, []);\r\n\r\n  // פונקציית סינון מרכזית\r\n  const applyFilters = () => {\r\n    let results = [...shows];\r\n\r\n    // חיפוש לפי שם להקה\r\n    if (query && query.trim() !== \"\") {\r\n      results = results.filter(show =>\r\n        show.bandName?.toLowerCase().includes(query.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // סינון לפי מדינה\r\n    if (location && location !== \"\") {\r\n      results = results.filter(show => {\r\n        // בדיקה גמישה יותר - תומך גם ב-country וגם ב-location\r\n        const showCountry = show.hall?.country || show.country || show.location;\r\n        return showCountry?.toLowerCase() === location.toLowerCase();\r\n      });\r\n    }\r\n\r\n    // סינון לפי טווח תאריכים\r\n    if (startDate || endDate) {\r\n      console.log(\"📅 Filtering by dates:\", { startDate, endDate });\r\n      results = results.filter(show => {\r\n        // אם אין תאריך -> לא מציגים את ההופעה\r\n        if (!show.showDate) return false;\r\n\r\n        console.log(\"📅 raw show.date:\", show.showDate);\r\n\r\n        // יצירת אובייקט Date מתוך \"YYYY-MM-DD\"\r\n        const [year, month, day] = show.showDate.split(\"-\");\r\n        const showDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\r\n\r\n        console.log(\"👉 parsed showDate:\", showDate);\r\n\r\n        // ניקוי שעות מהתאריכים שהמשתמש בחר\r\n        const start = startDate ? new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate()) : null;\r\n        const end = endDate ? new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate()) : null;\r\n\r\n        console.log(\"🔎 comparing:\", { showDate, start, end });\r\n\r\n        if (start && !end) {\r\n          return showDate >= start;\r\n        }\r\n\r\n        if (!start && end) {\r\n          return showDate <= end;\r\n        }\r\n\r\n        if (start && end) {\r\n          return showDate >= start && showDate <= end;\r\n        }\r\n\r\n        return true;\r\n      });\r\n    }\r\n\r\n\r\n\r\n    setFilteredShows(results);\r\n  };\r\n\r\n  // עדכון הסינון בכל שינוי\r\n  useEffect(() => {\r\n    applyFilters();\r\n  }, [query, location, startDate, endDate, shows]);\r\n\r\n  // פונקציה לניקוי כל הפילטרים\r\n  const clearFilters = () => {\r\n    setQuery(\"\");\r\n    setLocation(\"\");\r\n    setStartDate(null);\r\n    setEndDate(null);\r\n    setFilteredShows(shows);\r\n  };\r\n\r\n  return (\r\n    <div className=\"HomePageContainer\">\r\n      <h2>Worldwide Metal Shows Tickets</h2>\r\n\r\n      <div className=\"filter-bar\">\r\n        <SearchBox query={query} setQuery={setQuery} />\r\n        <FilterBox location={location} setLocation={setLocation} />\r\n        <DateBox\r\n          startDate={startDate}\r\n          endDate={endDate}\r\n          setStartDate={setStartDate}\r\n          setEndDate={setEndDate}\r\n          onApply={applyFilters} // אפשר להשתמש בזה אם רוצים חיפוש ידני\r\n        />\r\n        <button onClick={clearFilters} className=\"clear-filters\">\r\n          Clear All Filters\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"filter-info\">\r\n        {(query || location || startDate || endDate) && (\r\n          <p>\r\n            Active filters:\r\n            {query && ` Band: \"${query}\"`}\r\n            {location && ` Location: ${location}`}\r\n            {startDate && ` From: ${startDate.toLocaleDateString()}`}\r\n            {endDate && ` Until: ${endDate.toLocaleDateString()}`}\r\n            {` | Found: ${filteredShows.length} shows`}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"shows-list\">\r\n        {filteredShows.length > 0 ? (\r\n          filteredShows.map((show) => (\r\n            <ShowCard key={show.showId} {...show} />\r\n          ))\r\n        ) : (\r\n          <div className=\"no-shows\">\r\n            <p>No shows found matching your criteria</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}